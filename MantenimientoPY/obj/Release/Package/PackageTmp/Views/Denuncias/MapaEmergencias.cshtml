@model IEnumerable<MantenimientoPY.Models.Denuncia>

@{
    ViewBag.Title = "Mapa de emergencias";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
    function DisplayGoogleMap() {
        var lat = "9.962590";
        var long = "-84.078221";
        //Set the Latitude and Longitude of the Map
        var myAddress = new google.maps.LatLng(lat, long);

        //Create Options or set different Characteristics of Google Map
        var mapOptions = {
            center: myAddress,
            zoom: 15,
            minZoom: 1,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        //Display the Google map in the div control with the defined Options
        var map = new google.maps.Map(document.getElementById("myDiv"), mapOptions);

        @foreach(var item in Model){
     <text>
        var marker = new google.maps.Marker({
          map: map,
          position: { lat: @item.latitudDenuncia, lng: @item.longitudDenuncia },
            title: '@item.Ciudadano.nombreCiudadano @item.Ciudadano.apellidoPatCiudadano @item.Ciudadano.apellidoMatCiudadano',
            url: '/denuncias/Edit/@item.idDenuncia',
            
        });
        google.maps.event.addListener(marker, 'click', function() {
        window.location.href = this.url;
        });
    </text>
            }
        
       

        marker.setMap(map);
    }
</script>

<h2>Mapa de emergencias activas</h2>

<div id="myDiv" style="width:100%;height:400px;"></div>
<p>Para modificar la denuncia presione con el cursor el icono rojo del mapa</p>
<script>
    $(document).ready(function () {
        DisplayGoogleMap();
    });
</script>

